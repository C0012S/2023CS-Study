# 함수형 프로그래밍이란?

## 함수형 프로그래밍이란?
### 함수란?
하나의 특별한 목적의 작업을 수행하기 위해 독립적으로 설계된 코드의 집합으로 정의할 수 있다.

### 함수를 사용하는 이유
- 함수를 사용하는 가장 큰 이유는 바로 반복적인 프로그래밍을 피할 수 있기 때문이다. 프로그램에서 특정 작업을 여러 번 반복해야 할 때는 해당 작업을 수행하는 함수를 작성하면 된다. 그리고서 프로그램이 필요할 때마다 작성한 함수를 호출하면 해당 작업을 반복해서 수행할 수 있다.
- 프로그램을 여러 개의 함수로 나누어 작성하면, 모듈화로 인해 전체적인 코드의 가독성이 좋아진다. 그리고 프로그램에 문제가 발생하거나 기능의 변경이 필요할 때에도 손쉽게 유지보수를 할 수 있다.
- 함수의 크기에 대해서 정확히 명시된 규칙은 없으나, 대략 하나의 기능을 하나의 함수로 만드는 것이 가장 좋다.

### 프로그래밍 패러다임
프로그래밍 패러다임(Programming Paradigm)은 프로그래머에게 프로그래밍의 관점을 갖게 하고, 결정하는 역할을 한다. 이러한 프로그래밍 패러다임은 다음과 같이 크게 두 가지로 나눌 수 있다.

- 명령형 프로그래밍 : 프로그래밍의 상태와 그것을 변경시키는 구문의 관점에서의 연산을 설명
    - 절차적 프로그래밍 : 프로시저(Procedure)를 이용해 순차적인 처리를 중요시 여기는 패러다임        
        ex : C, C++        
    - 객체 지향 프로그래밍 : 객체들의 집합으로 프로그램의 상호작용을 표현        
        ex : C++, Java, C#        
- 선언적 프로그래밍 : 어떻게(How) 할 것인가보다는 무엇(What)을 할 것인가를 표현
    - 함수형 프로그래밍 : 순수 함수(Pure Function)를 조합하고 프로그램을 만드는 방식        
        ex : 클로저, 하스켈, 리스프
        
명령형 프로그래밍과의 비교  
![Untitled](https://user-images.githubusercontent.com/6733004/46571789-717c4300-c9b6-11e8-82f4-1dee07108e98.jpg)

함수형 프로그래밍은 초창기부터 소프트웨어 개발의 한 흐름이었지만, 요즘 날 그 중요성이 더욱 커지게 되었다.

### 함수형 프로그래밍이란?
- 함수형 프로그래밍은 하나의 프로그래밍 패러다임으로 정의되는 일련의 코딩 접근 방식이며, 자료 처리를 수학적 함수의 계산으로 취급하고 상태와 가변 데이터를 멀리하는 프로그래밍 패러다임을 의미한다.
- 함수형 프로그래밍 언어로 설계된 클로저, 스칼라, 하스켈 등의 언어가 있고, 자바스크립트, 코틀린, 파이썬 등에도 최근 버전에 함수형 프로그래밍 문법이 추가 되었다.

### 함수형 프로그래밍을 배워야 하는 이유
- 함수형 프로그래밍은 기존 절차적 프로그래밍과 객체 지향형 프로그래밍과는 다른 새로운 방식이다. 함수형 프로그래밍을 배우는 것은 스칼라나 클로저에 관심이 없고 앞으로 쓰지 않을 것 같다고 해도 **다른 방식으로 사고하는 법을 배우는 것**이다.
- 새로운 계산방법을 배우는 것 처럼 사고의 전환을 필요로 하며 **다양한 사고방식으로 프로그래밍을 바라보면 유연한 문제해결이 가능**하다.


## 함수형 프로그래밍 특징
함수형 프로그래밍의 특징을 나타내는 사진은 다음과 같다.
![Untitled](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FX4iEk%2FbtrGtgWoT84%2FWE6uWY9QZj2MAP6ePagsv0%2Fimg.png)

### 순수 함수(Pure Function)
- 동일한 입력에는 항상 같은 값을 반환해야 하는 함수
- 함수의 실행이 프로그램의 실행에 영향을 미치지 않아야 하는 함수
- 함수 내부에서 인자의 값을 변경하거나 프로그램 상태를 변경하는 Side Effect가 없는 것

```jsx
let num = 1;

function add(a) {
    return a + num;
}
```
위와 같은 예제에서는 add 함수 안에서 전역으로 선언된 변수인 num을 참조하기 때문에 순수 함수라고 볼 수 없다.

```jsx
// 순수 함수
function add(a, b) {
    return a + b;
}

const result = add(2, 3);
```
위와 같이 add 함수가 프로그램 실행에 영향을 미치지 않고 입력 값에 대해서만 값의 변환이 있으므로 순수 함수이다.

> 순수 함수는 프로그램의 변화 없이 입력 값에 대한 결과를 예상할 수 있어 테스트가 용이하다.
> 

### 비상태, 불변성(Stateless, Immutability)
- 함수형 프로그래밍에서의 데이터는 변하지 않는 불변성을 유지해야 한다.
- 데이터의 변경이 필요한 경우, 원본 데이터 구조를 변경하지 않고 그 데이터의 복사본을 만들어서 그 일부를 변경하고, 변경한 복사본을 사용해 작업을 진행한다.

```jsx
let person = { name: "sh", age: "25" };

function increaseAge(person) {
    person.age = person.age + 1;
    return person;
}
```
위의 예제에서는 increaseAge 함수에서 전역으로 선언된 person의 age 속성을 변경하므로 불변성 유지를 만족하지 못한다.

```jsx
// 비상태, 불변성 만족
const person = { name: "sh", age: "25" };

function increaseAge(person) {
    return { ...person, age: person.age + 1 };
}
```
위처럼 객체의 값을 바꾸기 위해서는 데이터의 복사본을 만들어, 그 복사본을 사용해 작업을 진행하고 반환한다.

### 선언형 함수(Expressions)
- 명령형 프로그래밍은 무엇을 어떻게 할 것인가에 주목하고, 선언형 프로그래밍은 무엇을 할 것인가에 주목한다.

```jsx
let numbers = [1, 2, 3];

function multiply(numbers, multiplier) {
    for (let i = 0; i < numbers.length; i++) {
        numbers[i] = numbes[i] * multiplier;
    }
}
```
위의 예시에서는 for 문을 사용해서 배열의 각 요소에 multiplier를 곱해 주는 명령형 프로그래밍이다.  
함수형 프로그래밍에서는 마찬가지로 if, switch, for 등 명령문을 사용하지 않고 함수형 코드로 사용해야 한다.

```jsx
// 선언형 프로그래밍
function multiply(number, multiplier) {
    return number.map((num) => num * multiplier);
}
```
위의 예시는 for 문을 map으로 대치했고, Javascript에서는 filter, map, take, reduce 등의 함수형 코드를 사용한다.  
명령형에서 함수형으로 변환하는 과정 참조 : [[ES6+: 응용] 명령형에서 함수형으로 변환시키기 (tistory.com)](https://opentogether.tistory.com/76)

### 1급 객체(First class)
함수형 프로그래밍에서는 함수가 1급 객체가 된다. 1급 객체의 특징은 다음과 같다.
- 변수나 데이터 구조 안에 담을 수 있다.
- 파라미터로 전달할 수 있다.
- 반환 값(return value)으로 사용할 수 있다.
- 할당에 사용된 이름과 관계없이 고유한 구별이 가능하다.
- 동적으로 프로퍼티 할당이 가능하다.

```jsx
// 1급 객체
const addTwo = (num) => num + 2;
const multiplyTwo = (num) => num * 2;
const transform = (numbers) => numbers.map(addTwo).map(multiplyTwo);

console.log(transform([1, 2, 3, 4])); // [6, 8, 10, 12]
```
위의 예시에서는 함수를 변수에 할당하거나 반환하는 1급 객체로서의 특징을 보여 준다.

### 고차 함수(Higher-order Functions)
고차 함수의 속성을 가져야 하는데, 고차 함수의 특징은 다음과 같다.
- 함수를 인자로써 전달할 수 있어야 한다.
- 함수의 반환 값으로 또 다른 함수를 사용할 수 있다.

```jsx
// 고차 함수
const addInform = (name) => (age) => age + name;
const sh = addInform("상희");

console.log(sh("99")); // 99상희
```
위의 예제처럼 함수의 반환 값으로 다른 함수를 사용하거나, 함수의 반환 값으로 또 다른 함수를 사용 할 수 있어야 한다.

### 클로저
클로저란 부모 함수가 실행되었더라도 부모 함수의 변수에 접근할 수 있는 내부 함수(Inner Function)를 뜻한다.

### 유지 관리 가능성(Maintainability)
유지 관리 가능성이란 함수 밖에서 의도치 않게 어떠한 것이 바뀌지 않으므로(= 부수 효과가 발생하지 않기 때문에) 프로그램을 유지 관리하기 용이하다는 뜻이다.

* 부수 효과 : 함수 내의 동작으로 인해 함수 외부가 영향을 받는 것을 의미한다. 예를 들어 함수 내의 동작으로 인해 함수 밖의 변수 값이 변경되거나, 예외나 오류가 발생하여 실행이 중단되는 것 등을 뜻한다.

### 모듈화 (Modularity)
모듈화는 생산성을 증가시킨다. 작은 모듈은 빠르게 작성할 수 있으며 재사용하기 용이하여 프로그램 개발 속도를 높일 수 있다. 또한 모듈은 분리하여 테스트하기에도 유용하여 디버깅과 테스트 시간을 줄일 수 있다.

### 참조 투명성(Referential Transparency)
함수형 프로그래밍에서 함수는 항상 같은 동작을 진행한다. 따라서 프로그래머는 함수의 실행으로 인해 어떠한 결과를 반환할지 예측할 수 있다. 동일한 인자에 대해서는 항상 동일한 결과를 반환한다는 뜻으로 해석해도 된다.


## 함수형 프로그래밍 장단점
### 장점
- 높은 수준의 추상화를 제공한다.
- 함수 단위의 코드 재사용이 수월하다.
- 불변성을 지향하기 때문에 프로그램의 동작을 예측하기 쉬워진다.

### 단점
- 순수 함수를 구현하기 위해서는 코드의 가독성이 좋지 않을 수 있다.
- 함수형 프로그래밍에서는 반복이 for 문이 아닌 재귀를 통해 이루어지는데(Deep Copy), 재귀적 코드 스타일은 무한 루프에 빠질 수 있다.
- 순수 함수를 사용하는 것은 쉬울 수 있지만 조합하는 것은 쉽지 않다.


## 참고
- [코딩의 시작, TCP School](http://www.tcpschool.com/cpp/cpp_function_basic)
- [함수형 프로그래밍(Functional Programming)이란? 함수형 프로그래밍의 특징과 장점, 한계 (tistory.com)](https://code-lab1.tistory.com/245)
- [[프로그래밍] 함수형 프로그래밍(Functional Programming) 이란? - MangKyu's Diary (tistory.com)](https://mangkyu.tistory.com/111)
- [함수형 프로그래밍 요약 (velog.io)](https://velog.io/@kyusung/%ED%95%A8%EC%88%98%ED%98%95-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%9A%94%EC%95%BD)
- [함수형 프로그래밍이란? | JONGMINFIRE.DEV](https://jongminfire.dev/%ED%95%A8%EC%88%98%ED%98%95-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%EC%9D%B4%EB%9E%80)

