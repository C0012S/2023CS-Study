# 💡 프로세스와 스레드 차이

# ✅ 프로세스와 스레드 차이
- 프로세스는 메모리 상에서 실행 중인 프로그램을 말하며, 스레드는 이 프로세스 안에서 실행되는 흐름 단위를 말한다.
- 프로세스는 최소 하나의 스레드를 보유하고 있으며, 각각 별도의 주소 공간을 독립적으로 할당 받는다.(Code, Heap, Stack)
- 스레드는 이중에 Stack만 따로 할당 받고, 나머지 영역은 스레드끼리 서로 공유한다.

<br/>

## 요약
- 프로세스 : 자신만의 고유 공간과 자원을 할당 받아 사용
- 스레드 : 다른 스레드와 공간과 자원을 공유하면서 사용

<br/>
<br/>

# ✅ 프로세스의 문제점
- 프로세스 생성에 큰 오버헤드가 있다. (프로세스를 생성할 때 많은 시간이 소요된다.)
- 프로세스 컨텍스트 스위칭의 비효율성, 오버헤드가 크다.
- 프로세스 사이에 통신이 어렵다는 점(IPC 사용해야 한다.)

<br/>
<br/>

# ✅ 스레드의 출현 목적
- 프로세스보다 크기가 작은 실행 단위 필요
- 프로세스의 생성 및 소멸에 따른 오버헤드 감소
- 빠른 컨텍스트 스위칭
- 프로세스들의 통신 시간, 방법 어려움 해소

<br/>
<br/>

# ✅ 스레드 주소 공간
- 개별 스레드에게 할당된 메모리 영역을 말하고 스레드가 속한 프로세스의 공간 내에 생성된다.
- 스레드가 실행되기 위해 형성되는 메모리 영역과 스레드가 실행되는 동안 접근하는 모든 메모리 영역을 말한다.
- 하나의 스레드가 동작하기 위해 총 6 개의 공간이 있다.
- 사적 공간, 공유 공간, 커널 스택
    - 사적 공간에는 스레드 코드 공간, 스레드 전용 전역 변수 공간, 스택 공간이 있다.
    - 공유 공간에는 데이터 공간, 힙 공간이 있다.
    - 그리고 커널 스택이 있다.

<br/>
<br/>

# 🗣 면접 예상 질문
## Q1. 프로세스와 스레드의 차이를 설명해 주세요.
- 프로세스는 자원을 공유하지 않지만, 스레드는 자원을 공유한다.

<br/>

## Q2. 멀티 프로세스 대신 멀티 스레드를 사용하는 이유?
### 멀티 프로세스 대신 멀티 스레드를 사용하는 것의 의미?
- 쉽게 설명하면, 프로그램을 여러 개 키는 것보다 하나의 프로그램 안에서 여러 작업을 해결하는 것이다.

<br/>

![https://gmlwjd9405.github.io/images/os-process-and-thread/multi-thread.png](https://gmlwjd9405.github.io/images/os-process-and-thread/multi-thread.png)

<br/>

- 여러 프로세스(멀티 프로세스)로 할 수 있는 작업들을 하나의 프로세스에서 여러 스레드로 나눠가면서 하는 이유?
    - 자원의 효율성 증대
        - 멀티 프로세스로 실행되는 작업을 멀티 스레드로 실행할 경우, 프로세스를 생성하여 자원을 할당하는 시스템 콜이 줄어들어 자원을 효율적으로 관리할 수 있다.
            - 프로세스 간의 Context Switching시 단순히 CPU 레지스터 교체 뿐만 아니라 RAM과 CPU 사이의 캐쉬 메모리에 대한 데이터까지 초기화되므로 오버헤드가 크기 때문이다.
        - 스레드는 프로세스 내의 메모리를 공유하기 때문에 독립적인 프로세스와 달리 스레드 간 데이터를 주고 받는 것이 간단해지고 시스템 자원 소모가 줄어들게 된다.
    - 처리 비용 감소 및 응답 시간 단축
        - 또한 프로세스 간의 통신(IPC)보다 스레드 간의 통신의 비용이 적으므로 작업들 간의 통신의 부담이 줄어든다.
            - 스레드는 Stack 영역을 제외한 모든 메모리를 공유하기 때문이다.
        - 프로세스 간의 전환 속도보다 스레드 간의 전환 속도가 빠르다.
            - Context Switching 시 스레드는 Stack 영역만 처리하기 때문이다.

<br/>

- 주의할 점
    - 동기화 문제
    - 스레드 간의 자원 공유는 전역 변수(데이터 세그먼트)를 이용하므로 함께 상용할 때 충돌이 발생할 수 있다.

<br/>
<br/>

# 🗂 참고
- [[개발자 면접] 프로세스와 스레드의 차이점 (tistory.com)](https://zeroco.tistory.com/75)
- [[OS] 프로세스와 스레드의 차이 - Heee's Development Blog (gmlwjd9405.github.io)](https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html)
- [스레드 (tistory.com)](https://sayo-le.tistory.com/66)
- [👩‍💻 프로세스 vs 쓰레드 차이 정리 (tistory.com)](https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%E2%9A%94%EF%B8%8F-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%B0%A8%EC%9D%B4#%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4_VS_%EC%8A%A4%EB%A0%88%EB%93%9C_%EA%B2%B0%EB%A1%A0)
