# IPC(Inter Process Communication)

> 프로세스 간 통신
> 

❓프로세스: 실행 중인 프로그램

❓프로그램: 파일 시스템에 존재하는 실행 파일

- 프로세스끼리 직접적으로 통신하는 방법은 없음
    - 프로세스들이 서로 공간을 쉽게 접근하면 프로세스의 데이터나 코드가 다른 프로세스에 의해 쉽게 바뀔 수 있기 때문
    - 그럼에도 프로세스 간의 통신은 필요하기 때문에 IPC를 이용

### 스레드간 통신보다 프로세스간 통신이 어려운 이유

- 프로세스는 생성되면서 PC를 포함하여 메모리 공간 등을 포함하여 별도의 자원들 할당하지만, 스레드는 메모리 공간과 자원을 공유

## 프로세스 간 통신이 필요한 이유

### 정보 공유(Information Sharing)

- 여러 사용자가 동일한 정보에 엑세스 할 필요가 있을 수가 있다

### 가속화(Computation Speed-up)

- 특정 작업(task)를 여러 개의서브 작업(sub-task)로 쪼개어 프로세스의 병렬성을 키움으로써 처리 속도를 높일 수 있다
- 이 때 작업과 서브 작업은 서로 통신의 필요성이 생긴다

### 모듈화(Modularity)

- 특정한 시스템 기능을 별도의 프로세스(스레드)로 구분하여 시스템을 구성할 수 있다

### 편의성(Convenience)

- 다수의 사용자가 동시에 여러가지 작업을 수행할 수 있다

## 종류

![Untitled](https://velog.velcdn.com/images%2Fyanghl98%2Fpost%2F9d620bb0-54a2-48bd-b30f-d4f0fc4d0303%2Fimage.png)
### 메시지 전달(Message Passing)

- 커널이 제공하는 API를 이용해서 커널 공간을 통해 통신
- 메시지 큐(Message Queue)를 사용하여 송신 프로세스틑 큐에 enqueue, 수신 프로세스는 큐에 dequeue 하며 상호간 통신
    - 메시지 큐는 커널 단에서 관리
- 커널을 이용하기 때문에 구현이 비교적 쉬움
- 시스템 콜이 필요하며 이로 인해 오버헤드 발생

### 메모리 공유(Shared Memory)

- 프로세스끼리 특정 공통의 메모리 영역을 공유하며 상호간 통신하는 방법
- 프로세스가 공유 메모리 할당을 커널에 요청하면 커널은 해당 프로세스에 메모리 공간을 할당
    - 이후 어떤 프로세스건 해당 메모리 영역에 접근할 수 있다
- 데이터 자체를 공유하도록 지원하며, 한 프로세스에서 변경한 메모리 공간의 내용을 다른 프로세스에서 접근할 수 있다
- 대량의 정보를 다수의 프로세스에게 배포 가능
- 공유 메모리는 커널에서 관리
- 커널 의존도가 낮기 때문에 속도가 바르고 통신이 자유로움
- 자원과 데이터를 공유하기 때문에 동기화 이슈 발생

### 파이프(Pipe)

- 통신을 위한 메모리 공간(버퍼)을 생성하여 프로세스가 데이터를 주고 받게끔 한다.
1. **익명 파이프(Anonymous Pipe)**
- 일반적인 파이프
- 통신할 프로세스가 명확하게 알 수 있는 경우 사용
    - 부모-자식 or 형제 프로세스간 통신에 사용
    - 외부 프로세스에서 사용할 수 없다
- 파이프는 두 개의 프로세스를 연결하고, 하나의 프로세스는 데이터를 쓰기만, 다른 하나는 데이터를 읽기만 할 수 있다
    - 한쪽 뱡향으로만 통신이 가능한 파이프의 특징 때문에 반이중(Half-Duplex) 통신이라고 부르기도 한다
- 송/수신을 모두 하기 원한다면 두 개의 파이프를 만들어야 가능
- 간단하게 사용가능
- 단점
    - 반이중 통신: 프로세스가 읽기와 쓰기 통신을 모두 해야한다면, 파이프 두개를 만들어야 하므로 구현이 복잡해질 수 있다
    - 전이중 통신을 고려해야할 상황이라면 낭비가 심하기 때문에 좋은 선택이 아님
1. **네임드 파이프(Named Pipe)**
- 전혀 모르는 상태의 프로세스들 사이의 통신에 사용
- 익명 파이프의 확장된 상태로 부모 프로세스와 무관한 다른 프로세스도 통신 가능
    - 프로세스 통신을 위해 이름이 있는 파일을 사용하기 때문에 가능
    - FIFO라는 특수 파일을 이용해서 서로 관련 없는 프로세스 간 통신에 사용
        - 외부 프로세스와 통신 가능
- 반이중 통신→전이중 통신을 위해서는 익명 파이프처럼 2개를 만들어야 한다

### 소켓(Soket)

- 네트워크 상에서 프로세스 간에 통신하는 방식
- 로컬 뿐아니라 원격 통신도 가능
- 네트워크 소켓 통신을 통해 데이터 공유
    - 데이터 교환을 위해 양쪽 PC에서 각각 임의의 포트를 정하고 해당 포트 간의 대화를 통해 데이터를 주고 받는 방식
    - 이 때 각각 PC의 포트를 담당하는 소켓은 각각 하나의 프로세스 이다
- 전이중 통신이 가능
- 서버/클라이언트 환경을 구축하는데 용이
- 중대형 애플리케이션에서 주로 사용

### 메시지 큐(Message Queue)

- 입출력 방식은 Named Pipe와 동일
- 파이프처럼 데이터의 프름이 아니라 메모리 공간임
- 다수의 프로세스간 메시지를 전달할 수 있음
- 사용할 데이터에 번호를 붙이면서 여러 프로세스가 동시에 데이터를 쉽게 다룰 수 있다
- 메시지의 접근을 위해서는 키가 필요

### 메모리 맵(Memory Map)

- 메모리를 공유
- 열린 파일을 메모리에 맵핑 시켜서 공유하는 방식
- 주로 파일로 대용량 데이터를 공유할 때 사용
- file IO가 느릴 때 사용하면 좋음
- 대부분 운영 체제에서는 프로세스를 실행할 대 실행 파일의 각 세그먼트를 메모리에 사상하기 위해 메모리 맵 파일을 이용
- 메모리 맵 파일은 파일의 크기를 바꿀 수는 없으며 메모리 맵 파일을 사용하기 이전, 또는 이후에만 바꿀 수 있다

### RPC(Remote Procedure Call)

- 분산 네트워크 망에서 많이 사용되는 방식
- 별도의 원격 제어를 위한 코딩 없이 다른 주소 공간에서 함수나 프로시저를 실행할 수 있게 하는 프로세스간 통신 기술
- 분리된 PC에 저장된 데이터를 마치 내 PC에 존재하는 것처럼 데이터를 가져와 사용하는 통신 방법

# 질문

### IPC란 무엇이며 사용하는 이유는 무엇인가

프로세스간 통신
프로세스들이 서로 공간을 쉽게 접근하면 프로세스의 데이터나 코드가 다른 프로세스에 의해 쉽게 바뀔 수 있기 때문에 ********프로세스끼리 직접적으로 통신하는 방법은 없음

그럼에도 프로세스 간의 통신은 필요하기 때문에 IPC를 이용

위에 딱히 써두진 않았지만 알아두면 좋을 것 같은 질문

### IPC에서 발생할 수 있는 문제는 무엇이 있나요?

- 동기화 문제, 데드락, 경쟁 상태 등의 문제가 발생할 수 있습니다.

### 메모리 공유와 파이프를 사용한 IPC의 차이점은 무엇인가요?

- 메모리 공유는 두 개 이상의 프로세스가 같은 메모리 영역을 공유하여 데이터를 주고받는 방식입니다.
- 파이프는 한 프로세스가 데이터를 쓰고, 다른 프로세스가 이를 읽는 방식입니다.
- 메모리 공유는 빠른 속도와 직접적인 데이터 공유가 가능하지만, 동기화와 보안 문제가 발생할 수 있습니다.
- 파이프는 느린 속도지만, 동기화와 보안 문제가 적어 구현하기 간단합니다.

### IPC에서의 동기화와 비동기화의 차이점은 무엇인가요?

- 동기화는 여러 개의 프로세스가 동시에 접근하는 공유 자원의 일관성과 정확성을 보장하기 위해 사용하는 방법입니다.
- 비동기화는 데이터를 보내고 받는 프로세스들이 서로를 기다리지 않고 비동기적으로 동작하는 방법입니다.

**참고**

[[운영체제] IPC 기법](https://velog.io/@redgem92/운영체제-IPC-기법)

[IPC(Inter-Process Communication)란?](https://y-oni.tistory.com/77)

[[OS/운영체제] IPC란? - 정의, 종류, 방법](https://velog.io/@yanghl98/OS운영체제-IPC란)

[[OS] 프로세스 간 통신 방법(Inter Process Communication, IPC)](https://dar0m.tistory.com/233)
